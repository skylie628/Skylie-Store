{"version":3,"file":"verifyToken.js","names":["_jsonwebtoken","_interopRequireDefault","require","_unauthorizedError","obj","__esModule","verifyToken","req","res","next","_req$headers$authoriz","accessToken","headers","authorization","split","UnauthorizedError","jwt","verify","process","env","SECRET_KEY","err","user","status","json","msg","console","log","exports"],"sources":["../../src/middlewares/verifyToken.js"],"sourcesContent":["import  jwt from \"jsonwebtoken\"\r\nimport UnauthorizedError from \"../errors/unauthorizedError\";\r\nexport const verifyToken = (req,res,next) =>{\r\n    let accessToken = req.headers.authorization?.split(' ')[1];\r\n    if(!accessToken){\r\n        throw new UnauthorizedError('Thiáº¿u access token')\r\n    }\r\n    jwt.verify(accessToken,process.env.SECRET_KEY,(err,user)=>{\r\n        if (err) return res.status(404).json({\r\n            err:-1,\r\n            msg:'access token expired'\r\n        })\r\n        console.log(\"user la\",user)\r\n        req.user = user\r\n        next();\r\n    })\r\n}"],"mappings":";;;;;;AAAA,IAAAA,aAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,kBAAA,GAAAF,sBAAA,CAAAC,OAAA;AAA4D,SAAAD,uBAAAG,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,gBAAAA,GAAA;AACrD,IAAME,WAAW,GAAG,SAAdA,WAAWA,CAAIC,GAAG,EAACC,GAAG,EAACC,IAAI,EAAI;EAAA,IAAAC,qBAAA;EACxC,IAAIC,WAAW,IAAAD,qBAAA,GAAGH,GAAG,CAACK,OAAO,CAACC,aAAa,cAAAH,qBAAA,uBAAzBA,qBAAA,CAA2BI,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;EAC1D,IAAG,CAACH,WAAW,EAAC;IACZ,MAAM,IAAII,6BAAiB,CAAC,oBAAoB,CAAC;EACrD;EACAC,wBAAG,CAACC,MAAM,CAACN,WAAW,EAACO,OAAO,CAACC,GAAG,CAACC,UAAU,EAAC,UAACC,GAAG,EAACC,IAAI,EAAG;IACtD,IAAID,GAAG,EAAE,OAAOb,GAAG,CAACe,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MACjCH,GAAG,EAAC,CAAC,CAAC;MACNI,GAAG,EAAC;IACR,CAAC,CAAC;IACFC,OAAO,CAACC,GAAG,CAAC,SAAS,EAACL,IAAI,CAAC;IAC3Bf,GAAG,CAACe,IAAI,GAAGA,IAAI;IACfb,IAAI,CAAC,CAAC;EACV,CAAC,CAAC;AACN,CAAC;AAAAmB,OAAA,CAAAtB,WAAA,GAAAA,WAAA"}