{"version":3,"file":"index.js","names":["fs","require","path","Sequelize","process","basename","__filename","env","NODE_ENV","console","log","config","__dirname","db","sequelize","use_env_variable","host","dialect","port","dialectOptions","ssl","rejectUnauthorized","logging","readdirSync","filter","file","indexOf","slice","forEach","model","join","DataTypes","name","Object","keys","modelName","associate","sync","module","exports"],"sources":["../../src/models/index.js"],"sourcesContent":["'use strict';\n\nconst fs = require('fs');\nconst path = require('path');\nconst Sequelize = require('sequelize');\nconst process = require('process');\nconst basename = path.basename(__filename);\nconst env = process.env.NODE_ENV || 'development';\nconsole.log('config...')\nconst config = require(__dirname + '/../config/config.json')[env];\nconst db = {};\n\nlet sequelize;\nif (config.use_env_variable) {\n  //sequelize = new Sequelize(process.env[config.use_env_variable], config);\n  sequelize = new Sequelize('postgres', 'postgres','dinhvinhkhuong', {\n    host: 'db.lkmrqtakugzjncocpguw.supabase.co',\n    dialect: 'postgres' ,\n    port: 5432,\n    dialectOptions: \n        'false' === 'true' ?\n        {\n            ssl:{\n                require: true,\n                rejectUnauthorized: false,\n            }\n        }:{},\n    logging: false,\n  });\n} else {\n // sequelize = new Sequelize(config.database, config.username, config.password, config);\n  sequelize = new Sequelize('postgres', 'postgres','dinhvinhkhuong', {\n  host: 'db.lkmrqtakugzjncocpguw.supabase.co',\n  dialect: 'postgres' ,\n  port: 5432,\n  dialectOptions: \n      'true' === 'true' ?\n      {\n          ssl:{\n              require: true,\n              rejectUnauthorized: false,\n          }\n      }:{},\n  logging: false,\n});\n}\n\nfs\n  .readdirSync(__dirname)\n  .filter(file => {\n    return (\n      file.indexOf('.') !== 0 &&\n      file !== basename &&\n      file.slice(-3) === '.js' &&\n      file.indexOf('.test.js') === -1\n    );\n  })\n  .forEach(file => {\n    const model = require(path.join(__dirname, file))(sequelize, Sequelize.DataTypes);\n    db[model.name] = model;\n  });\n\nObject.keys(db).forEach(modelName => {\n  if (db[modelName].associate) {\n    db[modelName].associate(db);\n  }\n});\nsequelize.sync();\ndb.sequelize = sequelize;\ndb.Sequelize = Sequelize;\n\nmodule.exports = db;\n"],"mappings":"AAAA,YAAY;;AAEZ,IAAMA,EAAE,GAAGC,OAAO,CAAC,IAAI,CAAC;AACxB,IAAMC,IAAI,GAAGD,OAAO,CAAC,MAAM,CAAC;AAC5B,IAAME,SAAS,GAAGF,OAAO,CAAC,WAAW,CAAC;AACtC,IAAMG,OAAO,GAAGH,OAAO,CAAC,SAAS,CAAC;AAClC,IAAMI,QAAQ,GAAGH,IAAI,CAACG,QAAQ,CAACC,UAAU,CAAC;AAC1C,IAAMC,GAAG,GAAGH,OAAO,CAACG,GAAG,CAACC,QAAQ,IAAI,aAAa;AACjDC,OAAO,CAACC,GAAG,CAAC,WAAW,CAAC;AACxB,IAAMC,MAAM,GAAGV,OAAO,CAACW,SAAS,GAAG,wBAAwB,CAAC,CAACL,GAAG,CAAC;AACjE,IAAMM,EAAE,GAAG,CAAC,CAAC;AAEb,IAAIC,SAAS;AACb,IAAIH,MAAM,CAACI,gBAAgB,EAAE;EAC3B;EACAD,SAAS,GAAG,IAAIX,SAAS,CAAC,UAAU,EAAE,UAAU,EAAC,gBAAgB,EAAE;IACjEa,IAAI,EAAE,qCAAqC;IAC3CC,OAAO,EAAE,UAAU;IACnBC,IAAI,EAAE,IAAI;IACVC,cAAc,EACV,OAAO,KAAK,MAAM,GAClB;MACIC,GAAG,EAAC;QACAnB,OAAO,EAAE,IAAI;QACboB,kBAAkB,EAAE;MACxB;IACJ,CAAC,GAAC,CAAC,CAAC;IACRC,OAAO,EAAE;EACX,CAAC,CAAC;AACJ,CAAC,MAAM;EACN;EACCR,SAAS,GAAG,IAAIX,SAAS,CAAC,UAAU,EAAE,UAAU,EAAC,gBAAgB,EAAE;IACnEa,IAAI,EAAE,qCAAqC;IAC3CC,OAAO,EAAE,UAAU;IACnBC,IAAI,EAAE,IAAI;IACVC,cAAc,EACV,MAAM,KAAK,MAAM,GACjB;MACIC,GAAG,EAAC;QACAnB,OAAO,EAAE,IAAI;QACboB,kBAAkB,EAAE;MACxB;IACJ,CAAC,GAAC,CAAC,CAAC;IACRC,OAAO,EAAE;EACX,CAAC,CAAC;AACF;AAEAtB,EAAE,CACCuB,WAAW,CAACX,SAAS,CAAC,CACtBY,MAAM,CAAC,UAAAC,IAAI,EAAI;EACd,OACEA,IAAI,CAACC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,IACvBD,IAAI,KAAKpB,QAAQ,IACjBoB,IAAI,CAACE,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,KAAK,IACxBF,IAAI,CAACC,OAAO,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;AAEnC,CAAC,CAAC,CACDE,OAAO,CAAC,UAAAH,IAAI,EAAI;EACf,IAAMI,KAAK,GAAG5B,OAAO,CAACC,IAAI,CAAC4B,IAAI,CAAClB,SAAS,EAAEa,IAAI,CAAC,CAAC,CAACX,SAAS,EAAEX,SAAS,CAAC4B,SAAS,CAAC;EACjFlB,EAAE,CAACgB,KAAK,CAACG,IAAI,CAAC,GAAGH,KAAK;AACxB,CAAC,CAAC;AAEJI,MAAM,CAACC,IAAI,CAACrB,EAAE,CAAC,CAACe,OAAO,CAAC,UAAAO,SAAS,EAAI;EACnC,IAAItB,EAAE,CAACsB,SAAS,CAAC,CAACC,SAAS,EAAE;IAC3BvB,EAAE,CAACsB,SAAS,CAAC,CAACC,SAAS,CAACvB,EAAE,CAAC;EAC7B;AACF,CAAC,CAAC;AACFC,SAAS,CAACuB,IAAI,CAAC,CAAC;AAChBxB,EAAE,CAACC,SAAS,GAAGA,SAAS;AACxBD,EAAE,CAACV,SAAS,GAAGA,SAAS;AAExBmC,MAAM,CAACC,OAAO,GAAG1B,EAAE"}